(this.webpackJsonpcrud2=this.webpackJsonpcrud2||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},46:function(e,t,a){e.exports=a(77)},51:function(e,t,a){},52:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(22),c=a.n(r),i=(a(51),a(5)),o=a(6),s=a(8),u=a(7),m=a(9),h=a(16),d=a(18),b=(a(52),a(32),a(1)),p=(a(25),a(19)),E=a(11),g=a.n(E),f=function(e){return function(e){console.log("in get user "),g.a.get("/user").then((function(t){if(t.data==={})return console.log(t.data);t.data;e({type:"SET_USER",payload:t.data})})).catch((function(e){console.log(e)}))}},v=a(3),O={authenticated:!1,loading:!1,credentials:{}};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATE_USER":return Object(v.a)({},e,{authenticated:!0});case"LOADING_USER":return Object(v.a)({},e,{loading:!0});case"NOT_LOADING_USER":return Object(v.a)({},e,{loading:!1});case"SET_USER":return Object(v.a)({},e,{loading:!1,authenticated:!0,credentials:Object(v.a)({},e.credentials,{},t.payload)});case"CLEAR_USER":return Object(v.a)({},O);default:return Object(v.a)({},e)}},S={list:[],loaded:!1};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIST":return Object(v.a)({},e,{},t.payload);case"SET_LOADED":return Object(v.a)({},e,{loaded:!0});case"RESET_LOADED":return Object(v.a)({},e,{loaded:!1});case"CLEAR_LIST":return Object(v.a)({},S);case"UPDATE_LIST":return Object(v.a)({},e,{},t.payload);default:return Object(v.a)({},e)}},C={errors:{}};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return Object(v.a)({},e,{},t.payload);case"CLEAR_ERRORS":return Object(v.a)({},C);default:return Object(v.a)({},e)}},D=[a(42).a],_=Object(p.c)({user:j,list:y,ui:N}),w=Object(p.e)(_,{},Object(p.d)(p.a.apply(void 0,D),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),k=a(4),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).logOutUser=a.logOutUser.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"logOutUser",value:function(){localStorage.removeItem("FBIdToken"),w.dispatch({type:"CLEAR_USER"}),w.dispatch({type:"CLEAR_LIST"})}},{key:"render",value:function(){var e=this.props.user.authenticated;return l.a.createElement("div",null,l.a.createElement("ul",{className:"topnav"},l.a.createElement("li",null," ",l.a.createElement(h.b,{to:"/"}," Home  ")),l.a.createElement("li",null," ",l.a.createElement(h.b,{to:"/login"}," Login ")),!e&&l.a.createElement("li",null," ",l.a.createElement(h.b,{to:"/signup"}," SignUp ")),e&&l.a.createElement("li",null," ",l.a.createElement("a",{href:"#",onClick:this.logOutUser},"Logout ")," ",l.a.createElement("br",null)," ")))}}]),t}(l.a.Component),T=Object(k.b)((function(e){return{user:e.user}}))(R),L=a(14),I=(a(26),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={password:"",username:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("submitted"),this.props.loginUser(this.state,this.props.history)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props.user.loading,t=this.props.ui.errors;return console.log("loading",e),l.a.createElement("div",{className:"flexContainer"},l.a.createElement("div",{className:"col-3"}," "),l.a.createElement("div",{className:"col-6"},l.a.createElement("form",{onSubmit:this.handleSubmit},"Username:",l.a.createElement("input",{style:t.username||t.error?{borderColor:"red"}:{},type:"text",name:"username",onChange:this.handleChange,value:this.state.username,placeholder:"username"}),t.username&&l.a.createElement("label",null," ",t.username," "),l.a.createElement("br",null),"Password:",l.a.createElement("input",{type:"text",style:t.password||t.error?{borderColor:"red"}:{},name:"password",onChange:this.handleChange,value:this.state.password,placeholder:"password"}),t.password&&l.a.createElement("label",null," ",t.password),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",value:"submit",style:e?{color:"green"}:{}},"Button"),t.error&&l.a.createElement("label",null," ",t.error))),l.a.createElement("div",{className:"col-3"}," "))}}]),t}(l.a.Component)),A={loginUser:function(e,t){return function(a){a({type:"CLEAR_ERRORS"}),a({type:"LOADING_USER"}),g.a.post("/login",e).then((function(e){if(console.log(e.data),e.data.token){t.push("/");var n="Bearer ".concat(e.data.token);localStorage.setItem("FBIdToken",n),g.a.defaults.headers.common.Authorization=n,a(f())}else if(e.data.error)return console.log(e.data.error)})).catch((function(e){try{console.log(e.response.data),a({type:"SET_ERRORS",payload:{errors:e.response.data}})}catch(e){console.log(e)}})),a({type:"NOT_LOADING_USER"})}}},U=Object(k.b)((function(e){return{user:e.user,ui:e.ui}}),A)(Object(d.g)(I)),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",confirmPassword:"",username:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state);var t=this.props.signupUser(this.state,this.props.history);console.log(t)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){this.props.user.loading;var e=this.props.ui.errors;return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h1",null," Signup Page "),l.a.createElement("div",{className:"flexContainer"},l.a.createElement("div",{className:"col-3"}),l.a.createElement("div",{className:"col-6"},l.a.createElement("form",{onSubmit:this.handleSubmit},"Email: ",l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:"Email"}),e.email&&l.a.createElement("label",null," ",e.email," "),l.a.createElement("br",null),"PassWord: ",l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"password",onChange:this.handleChange,value:this.state.password,placeholder:"password"}),e.password&&l.a.createElement("label",null," ",e.password," "),l.a.createElement("br",null),"Confirm Password:",l.a.createElement("br",null)," ",l.a.createElement("input",{type:"text",name:"confirmPassword",onChange:this.handleChange,value:this.state.confirmPassword,placeholder:"confirmPassword"}),e.confirmPassword&&l.a.createElement("label",null," ",e.confirmPassword," "),l.a.createElement("br",null),"username:",l.a.createElement("br",null)," ",l.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange,value:this.state.username,placeholder:"username"}),e.username&&l.a.createElement("label",null," ",e.username," "),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",value:"submit"},"Submit"),e.errors&&l.a.createElement("label",null," ",e.errors," "))),l.a.createElement("div",{className:"col-3"})))}}]),t}(l.a.Component),P={signupUser:function(e,t){return function(a){a({type:"LOADING_USER"}),a({type:"CLEAR_ERRORS"}),g.a.post("/signup",e).then((function(e){if(console.log(e.data),e.data.token){t.push("/");var n="Bearer ".concat(e.data.token);localStorage.setItem("FBIdToken",n),g.a.defaults.headers.common.Authorization=n,a(f())}else if(e.data.error)return console.log(e.data.error);a({type:"NOT_LOADING_USER"})})).catch((function(e){a({type:"NOT_LOADING_USER"});try{console.log("err",e.response.data),a({type:"SET_ERRORS",payload:{errors:e.response.data}})}catch(e){console.log(e)}}))}}},B=Object(k.b)((function(e){return{user:e.user,ui:e.ui}}),P)(Object(d.g)(x)),G={val:{textAlign:"left"}},V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={edit:!1,email:"",firstName:"",lastName:"",age:"",bio:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.setEdit=a.setEdit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state);var t=this.state;delete t.edit,this.props.updateProfile(t),this.setState({edit:!1})}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"setEdit",value:function(){var e=this.props.user.credentials,t=(e._id,e.email),a=e.username,n=e.firstName,l=e.lastName,r=e.age,c=e.bio;this.setState({edit:!0,email:t,username:a,firstName:n,lastName:l,age:r,bio:c})}},{key:"render",value:function(){var e=this.props.user.credentials,t=e._id,a=e.email,n=e.username,r=e.firstName,c=e.lastName,i=e.age,o=e.bio,s=this.state.edit;return l.a.createElement("div",{style:G.val},"Profile Section",s||l.a.createElement("ul",null,l.a.createElement("li",null,"id:         ",t),l.a.createElement("li",null,"email:      ",a,"  "),l.a.createElement("li",null,"username:   ",n),l.a.createElement("li",null,"firstName:   ",r),l.a.createElement("li",null,"lastName:   ",c),l.a.createElement("li",null,"age:   ",i),l.a.createElement("li",null,"bio:   ",o),l.a.createElement("li",null," ",l.a.createElement("a",{href:"#",onClick:this.setEdit},"Edit Profile ")," ")),!s||l.a.createElement("form",{onSubmit:this.handleSubmit},"Email: ",l.a.createElement("input",{type:"text",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:"Email"}),l.a.createElement("br",null),"firstName: ",l.a.createElement("input",{type:"text",name:"firstName",onChange:this.handleChange,value:this.state.firstName,placeholder:"firstName"}),l.a.createElement("br",null),"lastName: ",l.a.createElement("input",{type:"text",name:"lastName",onChange:this.handleChange,value:this.state.lastName,placeholder:"lastName"}),l.a.createElement("br",null),"age: ",l.a.createElement("input",{type:"text",name:"age",onChange:this.handleChange,value:this.state.age,placeholder:"age"}),l.a.createElement("br",null),"bio: ",l.a.createElement("input",{type:"text",name:"bio",onChange:this.handleChange,value:this.state.bio,placeholder:"bio"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",value:"submit"},"Submit")))}}]),t}(n.Component);var F={updateProfile:function(e){return function(t){g.a.post("/updateuser",e).then((function(a){return t({type:"SET_USER",payload:e}),a.data})).catch((function(e){try{console.log(e.response.data)}catch(t){console.log("updateProfileerro",e)}}))}}},W=Object(k.b)((function(e){return{user:e.user}}),F)(V),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={title:"",content:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("submitted"),this.props.sendDocument(Object(v.a)({},this.state,{username:this.props.user.credentials.username}))}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return l.a.createElement("div",null,"Create Document ",l.a.createElement("br",null),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Title"}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"content",value:this.state.content,onChange:this.handleChange,placeholder:"Write A Note "}),l.a.createElement("br",null)," ",l.a.createElement("button",{type:"submit",value:"submit"}," Create ")))}}]),t}(n.Component);var z={sendDocument:function(e){return function(t){t({type:"RESET_LOADED"}),console.log(e),g.a.post("/create",e).then((function(e){console.log("success",e.data)})).catch((function(e){console.log("error",e)}))}}},H=Object(k.b)((function(e){return{user:e.user}}),z)(X),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleEdit=function(e){e.preventDefault();var t=a.props.item,n=t.title,l=t.content;a.setState({edit:!0,title:n,content:l})},a.handleDelete=function(e){e.preventDefault(),console.log("buttotn pressed ")},a.handleSubmit=function(e){e.preventDefault(),a.setState({edit:!1}),a.props.item.title=a.state.title,a.props.item.content=a.state.content;var t=a.props.editDocument(Object(v.a)({},a.props.item,{username:a.props.user.username}));console.log(t)},a.handleDelete=function(e){a.props.deleteDocument(a.props.item)},a.state={edit:!1,title:"",content:""},a.handleDelete=a.handleDelete.bind(Object(b.a)(a)),a.handleEdit=a.handleEdit.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleDelete=a.handleDelete.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){console.log(this.props);var e=this.state.edit,t=this.props.item,a=t.title,n=t.content;t._id;return l.a.createElement("div",null,!e&&l.a.createElement("div",{className:"listItem"},l.a.createElement("h2",null," ",a," "),l.a.createElement("h3",null," ",n," "),l.a.createElement("div",{className:"listItemButtons"},l.a.createElement("button",{onClick:this.handleEdit},"Edit"),l.a.createElement("button",{onClick:this.handleDelete}," Delete "))),e&&l.a.createElement("div",{className:"listItem"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{type:"text",value:this.state.title,name:"title",onChange:this.handleChange}),l.a.createElement("input",{type:"text",value:this.state.content,name:"content",onChange:this.handleChange}),l.a.createElement("button",null," Submit "))),l.a.createElement("br",null))}}]),t}(n.Component),$={editDocument:function(e){return function(t){g.a.post("/editDocument",e).then((function(e){return console.log(e.data),"inserted"})).catch((function(e){console.log(e)}))}},deleteDocument:function(e){return function(t){g.a.post("/removeDocument",e).then((function(e){return console.log(e.data),"deleted"})).catch((function(e){console.log("error:",e)}))}}},q=Object(k.b)((function(e){return{user:e.user}}),$)(J),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getList=a.getList.bind(Object(b.a)(a)),a.makeList=a.makeList.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getList",value:function(){console.log("getting list"),console.log(this.props.user.credentials.username),this.props.listDocument(this.props.user.credentials.username)}},{key:"makeList",value:function(){return console.log("createing list"),this.props.list.list.documents.map((function(e){return l.a.createElement(q,{item:e})}))}},{key:"render",value:function(){var e=this.props.list,t=(e.list,e.loaded),a=this.props.user.authenticated;return console.log(t),l.a.createElement("div",{className:"listContainer"},!t&&a&&this.getList(),!t||this.makeList())}}]),t}(n.Component),M={listDocument:function(e){return function(t){g.a.post("/list",{username:e}).then((function(e){var a={list:e.data};t({type:"SET_LIST",payload:a}),t({type:"SET_LOADED"})})).catch((function(e){console.log("error",e)}))}}},Q=Object(k.b)((function(e){return{user:e.user,list:e.list}}),M)(K),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={create:!0},a.switchView=a.switchView.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"switchView",value:function(){var e=!this.state.create;this.setState({create:e})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"flexContainer"},l.a.createElement("div",{className:"col-6"},l.a.createElement("a",{className:"switchClass",href:"#",onClick:this.switchView}," Switch ")," ",l.a.createElement("br",null),l.a.createElement("br",null),!this.state.create||l.a.createElement("div",null," ",l.a.createElement(Q,null)," "),this.state.create||l.a.createElement("div",null," ",l.a.createElement(H,null)," ")),l.a.createElement("div",{className:"col-6"}," ",l.a.createElement(W,null)," ")))}}]),t}(l.a.Component),Z=Object(d.g)(Y),ee=a(30);var te=function(e){return{user:e.user,authenticated:e.user.authenticated}},ae=Object(k.b)(te)((function(e){var t=e.component,a=e.authenticated,n=Object(ee.a)(e,["component","authenticated"]);return console.log(a),l.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a?l.a.createElement(t,e):l.a.createElement(d.a,{to:"/login"})}}))})),ne=Object(k.b)(te)((function(e){var t=e.component,a=e.authenticated,n=Object(ee.a)(e,["component","authenticated"]);return console.log(a),l.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0!==a?l.a.createElement(t,e):l.a.createElement(d.a,{to:"/"})}}))})),le=a(45),re=a.n(le),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).isLoggedIn(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"isLoggedIn",value:function(){var e=localStorage.getItem("FBIdToken");if(null!==e){var t=re()(e.split(" ")[1]);console.log(t);t.username;var a=t.iat;(new Date).getTime()-1e3*a<1e7&&(w.dispatch({type:"AUTHENTICATE_USER"}),g.a.defaults.headers.common.Authorization=e,w.dispatch(f()))}}},{key:"render",value:function(){return l.a.createElement(k.a,{store:w},l.a.createElement("div",null,l.a.createElement(h.a,null,l.a.createElement(T,null),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement(d.d,null,l.a.createElement(ne,{path:"/signup",component:B}),l.a.createElement(ne,{path:"/login",component:U}),l.a.createElement(ae,{path:"/",component:Z})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.9464d352.chunk.js.map